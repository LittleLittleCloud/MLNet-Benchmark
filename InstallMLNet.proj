<Project InitialTargets="Run" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="Shared.props" />

    <Target Name="Run">
        <PropertyGroup>
            <PackageId Condition="'$(OS)' == 'Windows_NT'">microsoft.ml.modelbuilder.cli.win64</PackageId>
            <PackageId Condition="('$(OS)' == 'Unix') AND '$([MSBuild]::IsOsPlatform())' == 'True' ">microsoft.ml.modelbuilder.cli.osx</PackageId>
            <PackageId Condition="('$(OS)' == 'Unix') AND '$([MSBuild]::IsOsPlatform())' != 'True' ">microsoft.ml.modelbuilder.cli.linux64</PackageId>
        </PropertyGroup>

        <Message Importance="high" Text = "installing $(PackageId) with version $(MlNetVersion)" />
        <Exec Command="dotnet tool install $(PackageId) --version $(MlNetVersion)" />
    </Target>
</Project>